5 运输层
========

5.1 运输层协议概述
------------------

进程之间的通信
~~~~~~~~~~~~~~

运输层属于面向通信部分的最高层，同时也是用户功能中的最底层。

网络层为主机之间提供逻辑通信，而运输层为应用进程之间提供端到端的逻辑通信。

运输层还要对收到的报文进行差错检测。IP数据报首部中的检验和字段，只检验首部是否出现差错，不检查数据部分。

运输层的端口
~~~~~~~~~~~~

注意路由器或交换机上的\ ``硬件端口``\ 是完全不同的概念。\ ``硬件端口``\ 是不同硬件设备进行交互的接口。\ ``软件端口``\ 则是应用层的各种协议进程与运输实体之间交互的一种地址。

TCP/IP的运输层采用16位的端口号标志端口。分为两类：

-  服务器使用的端口号 这里又分两类：

   -  熟知端口号：0-1023。IANA把这些端口号给了TCP/IP最重要的一些应用程序。
   -  登记端口号：1024-49151。这类端口号的使用需要在IANA登记，防止重复。

-  客户端使用的端口号
   数值为49152-65535。这类端口号仅在客户进程运行时才动态选择。当服务器进程收到客户进程的报文时。就知道了客户进程的端口号，因而可以把数据发送给客户进程。通信结束后，客户端口号就不存在，可以供其他进程使用。
