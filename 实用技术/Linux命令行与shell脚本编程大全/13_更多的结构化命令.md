# 13 更多的结构化命令

## 13.1 for命令

### 基本用法

```bash
for var in list; do
    commands
done
```

注意for遍历完之后，循环变量的值还剩下的shell脚本中还能访问

```bash
#!/bin/bash
# basic for command

for test in Alabama Alaska Arizona Arkansas California Colorado; do
    echo "The next state is $test"
done

echo "The last state we visited was $test"
test=Connecticut
echo "Wait, now we're visiting $test"
```

```bash
leo@ubuntu:~/sh_test$ ./test.sh
The next state is Alabama
The next state is Alaska
The next state is Arizona
The next state is Arkansas
The next state is California
The next state is Colorado
The last state we visited was Colorado
Wait, now we're visiting Connecticut
```

### 处理空格和引号

for是按照空格开区分变量的，如果一个变量内包含空格，需要用双引号分开。如果有单引号，可以使用转义字符，也可以用双引号。

```bash
#!/bin/bash
# basic for command

for test in I don\'t know if "I'll" go to "New York"; do
    echo $test
done
```

```bash
leo@ubuntu:~/sh_test$ ./test.sh
I
don't
know
if
I'll
go
to
New York
```

### 从变量或文件中读取值

```bash
# !/bin/bash
# using a variable to hold a list

list="Alabama Alaska Arizona Arkansas Colorado"
list=$list" Connecticut"

for state in $list; do
    echo "Have you ever visited $state?"
done
```

```bash
leo@ubuntu:~/sh_test$ ./test.sh
Have you ever visited Alabama?
Have you ever visited Alaska?
Have you ever visited Arizona?
Have you ever visited Arkansas?
Have you ever visited Colorado?
Have you ever visited Connecticut?
```

```bash
# !/bin/bash
# reading from a file

file="./states"

for state in $(cat $file); do
    echo "Visit beautiful $state"
done
```

```bash
leo@ubuntu:~/sh_test$ ./test.sh 
Visit beautiful Alabama
Visit beautiful Alaska
Visit beautiful Arizona
Visit beautiful Arkansas
Visit beautiful Colorado
Visit beautiful Connecticut
```

文件states

```txt
Alabama
Alaska
Arizona
Arkansas
Colorado
Connecticut
```

