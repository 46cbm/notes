7 数据库设计和E-R模型
=====================

7.2 实体-联系模型
-----------------

E-R模型的三个基本概念：

-  实体集
-  联系集
-  属性

实体集
~~~~~~

-  实体（entity）是现实世界中可区别于所有其他对象的一个\ ``事物``\ 或\ ``对象``\ 。每个实体有一组\ ``性质``\ ，其中一些性质的值可以唯一地标识一个实体。
-  实体集（entity
   set）是相同类型（即具有相同性质或属性）的一个实体集合。

实体通过一组\ ``属性``\ （attribute）来表示。属性是实体集中每个成员所拥有的描述性性质。每个实体的每个属性都有一个\ ``值``\ 。

因此，数据库包括一组实体集，每个实体集包括任意数量的相同类型的实体。

联系集
~~~~~~

-  联系（relationship）是指多个实体间的相互关联。
-  联系集（relationship set）是相同类型联系的集合。

实体在联系中扮演的功能称为实体的角色（role）。角色一般是隐含的。但如果同样的实体集以不同的角色参与到一个联系集中多于一次，这时有必要显示的说明实体的角色。这样的联系集称为自环的（recursive）。

联系也可以具有描述性属性（descriptive attribute）

涉及n个实体集的联系集称为n元联系集。大部分联系集都是二元的。

-  联系集的度（degree）：参与联系集的实体集的数目。二元联系集的度是2，三元联系集的度是3。

属性
~~~~

每个属性都可以有一个可取值的集合，称为该属性的域（domain），或者值集（value
set）。E-R模型中属性可以按照以下标准来分类：

-  简单的和复合的
   复合（composite）属性可以分解为简单属性。复合属性还可是有层次的。

-  单值属性和多值属性
   多值属性可以有多个值，如teacher的phone_number可能有多个

-  派生属性
   这类属性的值可以从别的相关属性或者实体派生出来。比如teacher有一个属性students_advised，我们可以通过统计一个与教师关联的所有students的实体数目来获得这个值。

属性的值为NULL可能是三种情况：

-  当前实体没有这个属性，如有些人没有middle name
-  缺失：值存在，但是丢了
-  不知道：我们不知道值是否存在

7.3 约束
--------

映射基数
~~~~~~~~

映射基数（mapping
cardinality）表示一个实体通过一个联系集能关联的实体的个数。

对于实体集A和B之间的二元联系集R来说，映射基数必然是以下情况之一：

-  一对一
-  一对多
-  多对一
-  多对多

参与约束
~~~~~~~~

-  实体集E中的每个实体都参与到联系集R的至少一个联系中，实体集E在联系集R中的参与称为全部的
-  实体集E中只有部分实体参与到R的联系中，实体集E在联系集R的参与称为部分的
