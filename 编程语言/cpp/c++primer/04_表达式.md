# 4 表达式

字面值和变量是最简单的表达式，其结果就是字面值或变量的值

## 4.1 基础

### 基本概念

重载运算符后，运算对象的个数、优先级和结合顺序是不能改变的。

- 左值：使用的是对象的身份（在内存中的位置）
- 右值：使用的是对象的值

赋值运算的左边是一个左值。取地址运算符作用于一个左值对象。

### 求值顺序

注意求值顺序与优先级和结合律都无关。只有四种运算符明确规定了求值顺序：`&&` `||` `?:` `,`

下面的例子中，虽然优先级和结合律有规定。但四个函数的求值顺序是不确定的。如果这些函数会影响同一个对象，则这是条错误的表达式，将产生未定义的行为。

```cpp
f() + g() * h() + j()
```

## 4.2 算数运算符

算数运算符的运算对象和结果都是右值。在表达式求值之前，小整型会被提升到较大的整数类型，所有运算对象最终会被转换成统一类型。

注意求模运算的符号

- `m%(-n) = m%n`
- `(-m)%n = -(m%n)`

## 4.3 逻辑和关系运算符

逻辑运算符作用于任意能转换为布尔值的类型。关系运算符作用于算数或指针类型。两者的返回值都是布尔类型。两者的运算对象和求值结果都是右值。

## 4.4 赋值运算符

赋值运算符左侧必须是一个可以修改的左值。若左侧对象是一个内置类型，用初始值列表只能包含一个值。

## 4.5 递增和递减运算符

如非必须，尽量使用前置版本。前置版本对一些迭代器类型有很高的性能。

注意`后置递增运算`符优先级高于`解引用`

```cpp
// 这条语句等价于下面两条语句。建议使用上面这条语句
cout << *iter++ << endl;

cout << *iter << endl;
iter++;
```

## 4.6 成员访问运算符

`ptr->item`等价于`(*ptr).item`

注意`点运算符优`先级高于`解引用`，所以括号是必须的

## 4.7 条件运算符

## 4.8 位运算符

如果对象带符号，且值为负，则符号位的处理是没有明确规定的。因此强烈建议仅将位运算符作用于无符号对象。

`位移运算符`满足左结合律。
