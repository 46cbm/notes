# 2 变量和基本类型

数据的`类型`定义了数据的两个方面

1. 定义了数据元素的内容。数据类型决定了数据在内存中占的比特数，以及如何解释这些比特位的含义。
2. 定义了这类数据上能进行的操作

对象类型决定了改对象支持的操作。一条表达式是否合法取决于其中参与运算的对象的类型。在python这类动态语言中，类型在运行时进行检查。而c++这样的静态类型的语言，类型的检查在编译时进行。

## 2.1 基本内置类型

### 分类

- 算数类型 arithmetic type
  - 整型，包括整数、字符和布尔类型在内
  - 浮点型，float和double分别由7和16个有效位
- 空类型 void

字符类型中的`char16_t`, `char32_t`为Unicode字符集服务。

不要把无符号类型和带符号类型的变量一起运算。带符号数会自动转换成无符号数，带来不可知的结果。

### 字面值常量 literal

字面值常量的`形式`和`值`决定了其数据类型。

##### 整型和浮点型字面值

整数0开头为八进制，0x或0X开头为16进制。short没有对应的字面值。浮点数的字面值默认是double类型。

##### 字符和字符串字面值

字符串字面值是常量字符构成的数组。`编译器`会在每个字符串结尾节加空字符`\0`。

如果两个字符串字面值`相邻`或仅由`空格`、`缩进`和`换行符`分割，则它们实际上是一个整体。

##### 转义序列

`\`后加数字的话，可以跟1-3个八进制数，或者`\x`后跟1到多个16进制数。

##### 指定字面值的类型

字面值可以通过加前缀或后缀来指定类型

字符和字符串字面值的前缀

- u char16_t
- U char32_t
- L wchar_t
- u8 char

整型字面值的后缀

- u or U, unsigned
- l or L, long
- ll or LL, long long

浮点型字面值

- f or F, float
- l or L, long double

## 2.2 变量

变量提供了一个具名的、可供程序操作的存储空间。变量的数据类型决定了

- 变量所占内存空间的大小和布局方式
- 该空间能存储的值的范围
- 变量能参与的运算

c++中变量和对象可以互换使用。

### 变量定义

初始化和赋值是完全两个不同的操作

- 初始化：创建变量时赋予其一个初始值
- 赋值：把对象的当前值擦除，写入一个新的值。

c++11中列表初始化得到了全面的应用。使用初始化列表进行初始化的值如果存在信息丢失的风险，则编译器会报错。

```cpp
int main()
{
    long double ld = 3.1415926;
    int a{ld};            // a和b是列表初始化的两种写法，这里都会报错
    int b = {ld};
    int c(ld);
    int d = ld;
    return 0;
}
```

如果不指定值，则会进行默认初始化。在函数外面，默认的初始值是0。在函数内，则不定。

### 变量声明和定义的关系

c++支持分离式编译。cout, cin就是在标准库中定义的变量，我们的程序能够使用。为支持分离式编译，c++将声明和定义分开。声明值规定了变量名和类型，而定义还要分配存储空间。

如果想声明一个变量，用extern关键字。

```cpp
extern int j;        // 声明j
int i;               // 声明并定义i
extern int k = 3;    // 声明并定义k，赋值会低消extern
```

如果要在多个文件中使用同一个变量，就必须将声明和定义分离。变量的定义只能出现在一个文件中。在其他用到这个变量的地方必须进行声明，但是不能重复定义。

### 作用域

全局作用域没有名字，如果作用域操作符左边空着，表示使用全局作用域。

```cpp
int reused = 42;
int main()
{
    int unique = 0;
    std::cout << reused << " " << unique << std::endl;   // 42 0

    int reused = 0;
    std::cout << reused << " " << unique << std::endl;   // 0 0

    std::cout << ::reused << " " << unique << std::endl; // 42 0

    return 0;
}
```



